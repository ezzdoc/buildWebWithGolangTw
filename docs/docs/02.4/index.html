<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>02.4 | 使用 Golang 打造 Web 應用程式</title>


<link rel="stylesheet" href="/buildWebWithGolangTw/book.min.89885fa0429ec73067282f26fc0c6d38cfc617a443ec4e835d47b821c52c6e92.css" integrity="sha256-iYhfoEKexzBnKC8m/AxtOM/GF6RD7E6DXUe4IcUsbpI=">


<script defer src="/buildWebWithGolangTw/search.min.4762838110f5450a8a33fcbe56c7ce734d09867f3e9ab5c1e6f7bbec99b65c68.js" integrity="sha256-R2KDgRD1RQqKM/y&#43;VsfOc00Jhn8&#43;mrXB5ve77Jm2XGg="></script>



<link rel="icon" href="/buildWebWithGolangTw/favicon.png" type="image/x-icon">

<base href="https://ezzdoc.com/buildWebWithGolangTw/">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://ezzdoc.com/buildWebWithGolangTw/"><span>使用 Golang 打造 Web 應用程式</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" placeholder="Search" id="book-search-input" maxlength="64" readonly />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>





    
  
  
  

  <style>
  nav ul a[href$="\2f buildWebWithGolangTw\2f docs\2f 02.4\2f "] {
      color: #004ed0;
  }
  </style>

<ul>
<li><a href="/buildWebWithGolangTw/docs/preface/">目錄</a></li>
<li><a href="/buildWebWithGolangTw/docs/01.0/">1.Go 環境配置</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/01.1/">1.1 安裝 Go</a></li>
<li><a href="/buildWebWithGolangTw/docs/01.2/">1.2 GOPATH 與工作空間</a></li>
<li><a href="/buildWebWithGolangTw/docs/01.3/">1.3 Go 命令</a></li>
<li><a href="/buildWebWithGolangTw/docs/01.4/">1.4 Go 開發工具</a></li>
<li><a href="/buildWebWithGolangTw/docs/01.5/">1.5 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/02.0/">2.Go 語言基礎</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/02.1/">2.1 你好，Go</a></li>
<li><a href="/buildWebWithGolangTw/docs/02.2/">2.2 Go 基礎</a></li>
<li><a href="/buildWebWithGolangTw/docs/02.3/">2.3 流程和函式</a></li>
<li><a href="/buildWebWithGolangTw/docs/02.4/">2.4 struct</a></li>
<li><a href="/buildWebWithGolangTw/docs/02.5/">2.5 物件導向</a></li>
<li><a href="/buildWebWithGolangTw/docs/02.6/">2.6 interface</a></li>
<li><a href="/buildWebWithGolangTw/docs/02.7/">2.7 併發</a></li>
<li><a href="/buildWebWithGolangTw/docs/02.8/">2.8 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/03.0/">3.Web 基礎</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/03.1/">3.1 web 工作方式</a></li>
<li><a href="/buildWebWithGolangTw/docs/03.2/">3.2 Go 建立一個簡單的 web 服務</a></li>
<li><a href="/buildWebWithGolangTw/docs/03.3/">3.3 Go 如何使得 web 工作</a></li>
<li><a href="/buildWebWithGolangTw/docs/03.4/">3.4 Go 的 http 套件詳解</a></li>
<li><a href="/buildWebWithGolangTw/docs/03.5/">3.5 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/04.0/">4.表單</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/04.1/">4.1 處理表單的輸入</a></li>
<li><a href="/buildWebWithGolangTw/docs/04.2/">4.2 驗證表單的輸入</a></li>
<li><a href="/buildWebWithGolangTw/docs/04.3/">4.3 預防跨站指令碼</a></li>
<li><a href="/buildWebWithGolangTw/docs/04.4/">4.4 防止多次提交表單</a></li>
<li><a href="/buildWebWithGolangTw/docs/04.5/">4.5 處理檔案上傳</a></li>
<li><a href="/buildWebWithGolangTw/docs/04.6/">4.6 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/05.0/">5.訪問資料庫</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/05.1/">5.1 database/sql 介面</a></li>
<li><a href="/buildWebWithGolangTw/docs/05.2/">5.2 使用 MySQL 資料庫</a></li>
<li><a href="/buildWebWithGolangTw/docs/05.3/">5.3 使用 SQLite 資料庫</a></li>
<li><a href="/buildWebWithGolangTw/docs/05.4/">5.4 使用 PostgreSQL 資料庫</a></li>
<li><a href="/buildWebWithGolangTw/docs/05.5/">5.5 使用 Beego orm 函式庫進行 ORM 開發</a></li>
<li><a href="/buildWebWithGolangTw/docs/05.6/">5.6 NOSQL 資料庫操作</a></li>
<li><a href="/buildWebWithGolangTw/docs/05.7/">5.7 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/06.0/">6.session 和資料儲存</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/06.1/">6.1 session 和 cookie</a></li>
<li><a href="/buildWebWithGolangTw/docs/06.2/">6.2 Go 如何使用 session</a></li>
<li><a href="/buildWebWithGolangTw/docs/06.3/">6.3 session 儲存</a></li>
<li><a href="/buildWebWithGolangTw/docs/06.4/">6.4 預防 session 劫持</a></li>
<li><a href="/buildWebWithGolangTw/docs/06.5/">6.5 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/07.0/">7.文字檔案處理</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/07.1/">7.1 XML 處理</a></li>
<li><a href="/buildWebWithGolangTw/docs/07.2/">7.2 JSON 處理</a></li>
<li><a href="/buildWebWithGolangTw/docs/07.3/">7.3 正則處理</a></li>
<li><a href="/buildWebWithGolangTw/docs/07.4/">7.4 範本處理</a></li>
<li><a href="/buildWebWithGolangTw/docs/07.5/">7.5 檔案操作</a></li>
<li><a href="/buildWebWithGolangTw/docs/07.6/">7.6 字串處理</a></li>
<li><a href="/buildWebWithGolangTw/docs/07.7/">7.7 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/08.0/">8.Web 服務</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/08.1/">8.1 Socket 程式設計</a></li>
<li><a href="/buildWebWithGolangTw/docs/08.2/">8.2 WebSocket</a></li>
<li><a href="/buildWebWithGolangTw/docs/08.3/">8.3 REST</a></li>
<li><a href="/buildWebWithGolangTw/docs/08.4/">8.4 RPC</a></li>
<li><a href="/buildWebWithGolangTw/docs/08.5/">8.5 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/09.0/">9.安全與加密</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/09.1/">9.1 預防 CSRF 攻擊</a></li>
<li><a href="/buildWebWithGolangTw/docs/09.2/">9.2 確保輸入過濾</a></li>
<li><a href="/buildWebWithGolangTw/docs/09.3/">9.3 避免 XSS 攻擊</a></li>
<li><a href="/buildWebWithGolangTw/docs/09.4/">9.4 避免 SQL 注入</a></li>
<li><a href="/buildWebWithGolangTw/docs/09.5/">9.5 儲存密碼</a></li>
<li><a href="/buildWebWithGolangTw/docs/09.6/">9.6 加密和解密資料</a></li>
<li><a href="/buildWebWithGolangTw/docs/09.7/">9.7 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/10.0/">10.國際化和本地化</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/10.1/">10.1 設定預設地區</a></li>
<li><a href="/buildWebWithGolangTw/docs/10.2/">10.2 本地化資源</a></li>
<li><a href="/buildWebWithGolangTw/docs/10.3/">10.3 國際化站點</a></li>
<li><a href="/buildWebWithGolangTw/docs/10.4/">10.4 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/11.0/">11.錯誤處理，除錯和測試</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/11.1/">11.1 錯誤處理</a></li>
<li><a href="/buildWebWithGolangTw/docs/11.2/">11.2 使用 GDB 除錯</a></li>
<li><a href="/buildWebWithGolangTw/docs/11.3/">11.3 Go 怎麼寫測試案例</a></li>
<li><a href="/buildWebWithGolangTw/docs/11.4/">11.4 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/12.0/">12.部署與維護</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/12.1/">12.1 應用日誌</a></li>
<li><a href="/buildWebWithGolangTw/docs/12.2/">12.2 網站錯誤處理</a></li>
<li><a href="/buildWebWithGolangTw/docs/12.3/">12.3 應用部署</a></li>
<li><a href="/buildWebWithGolangTw/docs/12.4/">12.4 備份和還原</a></li>
<li><a href="/buildWebWithGolangTw/docs/12.5/">12.5 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/13.0/">13.如何設計一個 Web 框架</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/13.1/">13.1 專案規劃</a></li>
<li><a href="/buildWebWithGolangTw/docs/13.2/">13.2 自訂路由器設計</a></li>
<li><a href="/buildWebWithGolangTw/docs/13.3/">13.3 controller 設計</a></li>
<li><a href="/buildWebWithGolangTw/docs/13.4/">13.4 日誌和配置設計</a></li>
<li><a href="/buildWebWithGolangTw/docs/13.5/">13.5 實現部落格的增刪改</a></li>
<li><a href="/buildWebWithGolangTw/docs/13.6/">13.6 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/14.0/">14.擴充套件 Web 框架</a>

<ul>
<li><a href="/buildWebWithGolangTw/docs/14.1/">14.1 靜態檔案支援</a></li>
<li><a href="/buildWebWithGolangTw/docs/14.2/">14.2 Session 支援</a></li>
<li><a href="/buildWebWithGolangTw/docs/14.3/">14.3 表單支援</a></li>
<li><a href="/buildWebWithGolangTw/docs/14.4/">14.4 使用者認證</a></li>
<li><a href="/buildWebWithGolangTw/docs/14.5/">14.5 多語言支援</a></li>
<li><a href="/buildWebWithGolangTw/docs/14.6/">14.6 pprof 支援</a></li>
<li><a href="/buildWebWithGolangTw/docs/14.7/">14.7 小結</a></li>
</ul></li>
<li><a href="/buildWebWithGolangTw/docs/ref/">附錄 A 參考資料</a></li>
</ul>







</nav>


<script>
(function() {
  var menu = document.querySelector("aside.book-menu nav");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>

    </aside>

    <div class="book-page">
      <header class="flex align-center justify-between book-header">
  <label for="menu-control">
    <img src="/buildWebWithGolangTw/svg/menu.svg" alt="Menu" />
  </label>
  <strong>02.4</strong>
</header>

      
<article class="markdown">

<h1 id="2-4-struct-型別">2.4 struct 型別</h1>

<h2 id="struct">struct</h2>

<p>Go 語言中，也和 C 或者其他語言一樣，我們可以宣告新的型別，作為其它型別的屬性或欄位的容器。例如，我們可以建立一個自訂型別 <code>person</code> 代表一個人的實體。這個實體擁有屬性：姓名和年齡。這樣的型別我們稱之<code>struct</code>。如下程式碼所示:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go" data-lang="Go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">person</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">age</span> <span style="color:#66d9ef">int</span>
}</code></pre></div>
<p>看到了嗎？宣告一個 struct 如此簡單，上面的型別包含有兩個欄位
- 一個 string 型別的欄位 name，用來儲存使用者名稱稱這個屬性
- 一個 int 型別的欄位 age，用來儲存使用者年齡這個屬性</p>

<p>如何使用 struct 呢？請看下面的程式碼</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go" data-lang="Go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">person</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">age</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">P</span> <span style="color:#a6e22e">person</span>  <span style="color:#75715e">// P 現在就是 person 型別的變量了
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">P</span>.<span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;Astaxie&#34;</span>  <span style="color:#75715e">// 賦值&#34;Astaxie&#34;給 P 的 name 屬性.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">P</span>.<span style="color:#a6e22e">age</span> = <span style="color:#ae81ff">25</span>  <span style="color:#75715e">// 賦值&#34;25&#34;給變數 P 的 age 屬性
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;The person&#39;s name is %s&#34;</span>, <span style="color:#a6e22e">P</span>.<span style="color:#a6e22e">name</span>)  <span style="color:#f92672">//</span> <span style="color:#a6e22e">訪問</span> <span style="color:#a6e22e">P</span> <span style="color:#a6e22e">的</span> <span style="color:#a6e22e">name</span> <span style="color:#a6e22e">屬性</span>.</code></pre></div>
<p>除了上面這種 P 的宣告使用之外，還有另外幾種宣告使用方式：</p>

<ul>
<li><p>1.按照順序提供初始化值</p>

<p>P := person{&ldquo;Tom&rdquo;, 25}</p></li>

<li><p>2.透過 <code>field:value</code> 的方式初始化，這樣可以任意順序</p>

<p>P := person{age:24, name:&ldquo;Tom&rdquo;}</p></li>

<li><p>3.當然也可以透過 <code>new</code> 函式分配一個指標，此處 P 的型別為*person</p>

<p>P := new(person)</p></li>
</ul>

<p>下面我們看一個完整的使用 struct 的例子</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go" data-lang="Go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#75715e">// 宣告一個新的型別
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">person</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">age</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#75715e">// 比較兩個人的年齡，回傳年齡大的那個人，並且回傳年齡差
</span><span style="color:#75715e">// struct 也是傳值的
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Older</span>(<span style="color:#a6e22e">p1</span>, <span style="color:#a6e22e">p2</span> <span style="color:#a6e22e">person</span>) (<span style="color:#a6e22e">person</span>, <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">p1</span>.<span style="color:#a6e22e">age</span>&gt;<span style="color:#a6e22e">p2</span>.<span style="color:#a6e22e">age</span> {  <span style="color:#75715e">// 比較 p1 和 p2 這兩個人的年齡
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">p1</span>, <span style="color:#a6e22e">p1</span>.<span style="color:#a6e22e">age</span><span style="color:#f92672">-</span><span style="color:#a6e22e">p2</span>.<span style="color:#a6e22e">age</span>
	}
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">p2</span>, <span style="color:#a6e22e">p2</span>.<span style="color:#a6e22e">age</span><span style="color:#f92672">-</span><span style="color:#a6e22e">p1</span>.<span style="color:#a6e22e">age</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">tom</span> <span style="color:#a6e22e">person</span>

	<span style="color:#75715e">// 賦值初始化
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">tom</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">tom</span>.<span style="color:#a6e22e">age</span> = <span style="color:#e6db74">&#34;Tom&#34;</span>, <span style="color:#ae81ff">18</span>

	<span style="color:#75715e">// 兩個欄位都寫清楚的初始化
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">bob</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">person</span>{<span style="color:#a6e22e">age</span>:<span style="color:#ae81ff">25</span>, <span style="color:#a6e22e">name</span>:<span style="color:#e6db74">&#34;Bob&#34;</span>}

	<span style="color:#75715e">// 按照 struct 定義順序初始化值
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">paul</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">person</span>{<span style="color:#e6db74">&#34;Paul&#34;</span>, <span style="color:#ae81ff">43</span>}

	<span style="color:#a6e22e">tb_Older</span>, <span style="color:#a6e22e">tb_diff</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Older</span>(<span style="color:#a6e22e">tom</span>, <span style="color:#a6e22e">bob</span>)
	<span style="color:#a6e22e">tp_Older</span>, <span style="color:#a6e22e">tp_diff</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Older</span>(<span style="color:#a6e22e">tom</span>, <span style="color:#a6e22e">paul</span>)
	<span style="color:#a6e22e">bp_Older</span>, <span style="color:#a6e22e">bp_diff</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Older</span>(<span style="color:#a6e22e">bob</span>, <span style="color:#a6e22e">paul</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Of %s and %s, %s is older by %d years\n&#34;</span>,
		<span style="color:#a6e22e">tom</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">bob</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">tb_Older</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">tb_diff</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Of %s and %s, %s is older by %d years\n&#34;</span>,
		<span style="color:#a6e22e">tom</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">paul</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">tp_Older</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">tp_diff</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Of %s and %s, %s is older by %d years\n&#34;</span>,
		<span style="color:#a6e22e">bob</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">paul</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">bp_Older</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">bp_diff</span>)
}</code></pre></div>
<h3 id="struct-的匿名欄位">struct 的匿名欄位</h3>

<p>我們上面介紹了如何定義一個 struct，定義的時候是欄位名與其型別一一對應，實際上 Go 支援只提供型別，而不寫欄位名的方式，也就是匿名欄位，也稱為嵌入欄位。</p>

<p>當匿名欄位是一個 struct 的時候，那麼這個 struct 所擁有的全部欄位都被隱含的引入了當前定義的這個 struct。</p>

<p>讓我們來看一個例子，讓上面說的這些更具體化</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go" data-lang="Go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Human</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">age</span> <span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">weight</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Student</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">Human</span>  <span style="color:#75715e">// 匿名欄位，那麼預設 Student 就包含了 Human 的所有欄位
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">speciality</span> <span style="color:#66d9ef">string</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">// 我們初始化一個學生
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">mark</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Student</span>{<span style="color:#a6e22e">Human</span>{<span style="color:#e6db74">&#34;Mark&#34;</span>, <span style="color:#ae81ff">25</span>, <span style="color:#ae81ff">120</span>}, <span style="color:#e6db74">&#34;Computer Science&#34;</span>}

	<span style="color:#75715e">// 我們訪問相應的欄位
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His name is &#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">name</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His age is &#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">age</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His weight is &#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">weight</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His speciality is &#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">speciality</span>)
	<span style="color:#75715e">// 修改對應的備註資訊
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">speciality</span> = <span style="color:#e6db74">&#34;AI&#34;</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Mark changed his speciality&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His speciality is &#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">speciality</span>)
	<span style="color:#75715e">// 修改他的年齡資訊
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Mark become old&#34;</span>)
	<span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">age</span> = <span style="color:#ae81ff">46</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His age is&#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">age</span>)
	<span style="color:#75715e">// 修改他的體重資訊
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Mark is not an athlet anymore&#34;</span>)
	<span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">weight</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">60</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His weight is&#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">weight</span>)
}</code></pre></div>
<p>圖例如下:</p>

<p><img src="images/2.4.student_struct.png" alt="" /></p>

<p>圖 2.7 struct 組合，Student 組合了 Human struct 和 string 基本型別</p>

<p>我們看到 Student 訪問屬性 age 和 name 的時候，就像訪問自己所有用的欄位一樣，對，匿名欄位就是這樣，能夠實現欄位的繼承。是不是很酷啊？還有比這個更酷的呢，那就是 student 還能訪問 Human 這個欄位作為欄位名。請看下面的程式碼，是不是更酷了。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go" data-lang="Go"><span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">Human</span> = <span style="color:#a6e22e">Human</span>{<span style="color:#e6db74">&#34;Marcus&#34;</span>, <span style="color:#ae81ff">55</span>, <span style="color:#ae81ff">220</span>}
<span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">Human</span>.<span style="color:#a6e22e">age</span> <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span></code></pre></div>
<p>透過匿名訪問和修改欄位相當的有用，但是不僅僅是 struct 欄位哦，所有的內建型別和自訂型別都是可以作為匿名欄位的。請看下面的例子</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go" data-lang="Go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Skills</span> []<span style="color:#66d9ef">string</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Human</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">age</span> <span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">weight</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Student</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">Human</span>  <span style="color:#75715e">// 匿名欄位，struct
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">Skills</span> <span style="color:#75715e">// 匿名欄位，自訂的型別 string slice
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span>    <span style="color:#75715e">// 內建型別作為匿名欄位
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">speciality</span> <span style="color:#66d9ef">string</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">// 初始化學生 Jane
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">jane</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Student</span>{<span style="color:#a6e22e">Human</span>:<span style="color:#a6e22e">Human</span>{<span style="color:#e6db74">&#34;Jane&#34;</span>, <span style="color:#ae81ff">35</span>, <span style="color:#ae81ff">100</span>}, <span style="color:#a6e22e">speciality</span>:<span style="color:#e6db74">&#34;Biology&#34;</span>}
	<span style="color:#75715e">// 現在我們來訪問相應的欄位
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Her name is &#34;</span>, <span style="color:#a6e22e">jane</span>.<span style="color:#a6e22e">name</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Her age is &#34;</span>, <span style="color:#a6e22e">jane</span>.<span style="color:#a6e22e">age</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Her weight is &#34;</span>, <span style="color:#a6e22e">jane</span>.<span style="color:#a6e22e">weight</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Her speciality is &#34;</span>, <span style="color:#a6e22e">jane</span>.<span style="color:#a6e22e">speciality</span>)
	<span style="color:#75715e">// 我們來修改他的 skill 技能欄位
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">jane</span>.<span style="color:#a6e22e">Skills</span> = []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;anatomy&#34;</span>}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Her skills are &#34;</span>, <span style="color:#a6e22e">jane</span>.<span style="color:#a6e22e">Skills</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;She acquired two new ones &#34;</span>)
	<span style="color:#a6e22e">jane</span>.<span style="color:#a6e22e">Skills</span> = append(<span style="color:#a6e22e">jane</span>.<span style="color:#a6e22e">Skills</span>, <span style="color:#e6db74">&#34;physics&#34;</span>, <span style="color:#e6db74">&#34;golang&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Her skills now are &#34;</span>, <span style="color:#a6e22e">jane</span>.<span style="color:#a6e22e">Skills</span>)
	<span style="color:#75715e">// 修改匿名內建型別欄位
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">jane</span>.<span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">3</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Her preferred number is&#34;</span>, <span style="color:#a6e22e">jane</span>.<span style="color:#66d9ef">int</span>)
}</code></pre></div>
<p>從上面例子我們看出來 struct 不僅僅能夠將 struct 作為匿名欄位，自訂型別、內建型別都可以作為匿名欄位，而且可以在相應的欄位上面進行函式操作（如例子中的 append）。</p>

<p>這裡有一個問題：如果 human 裡面有一個欄位叫做 phone，而 student 也有一個欄位叫做 phone，那麼該怎麼辦呢？</p>

<p>Go 裡面很簡單的解決了這個問題，最外層的優先訪問，也就是當你透過<code>student.phone</code>訪問的時候，是訪問 student 裡面的欄位，而不是 human 裡面的欄位。</p>

<p>這樣就允許我們去過載透過匿名欄位繼承的一些欄位，當然如果我們想訪問過載後對應匿名型別裡面的欄位，可以透過匿名欄位名來訪問。請看下面的例子</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go" data-lang="Go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Human</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">age</span> <span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">phone</span> <span style="color:#66d9ef">string</span>  <span style="color:#75715e">// Human 型別擁有的欄位
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Employee</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">Human</span>  <span style="color:#75715e">// 匿名欄位 Human
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">speciality</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">phone</span> <span style="color:#66d9ef">string</span>  <span style="color:#75715e">// 僱員的 phone 欄位
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">Bob</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Employee</span>{<span style="color:#a6e22e">Human</span>{<span style="color:#e6db74">&#34;Bob&#34;</span>, <span style="color:#ae81ff">34</span>, <span style="color:#e6db74">&#34;777-444-XXXX&#34;</span>}, <span style="color:#e6db74">&#34;Designer&#34;</span>, <span style="color:#e6db74">&#34;333-222&#34;</span>}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Bob&#39;s work phone is:&#34;</span>, <span style="color:#a6e22e">Bob</span>.<span style="color:#a6e22e">phone</span>)
	<span style="color:#75715e">// 如果我們要訪問 Human 的 phone 欄位
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Bob&#39;s personal phone is:&#34;</span>, <span style="color:#a6e22e">Bob</span>.<span style="color:#a6e22e">Human</span>.<span style="color:#a6e22e">phone</span>)
}</code></pre></div>
<h2 id="links">links</h2>

<ul>
<li><a href="docs/preface">目錄</a></li>
<li>上一章: <a href="docs/02.3">流程和函式</a></li>
<li>下一節: <a href="docs/02.5">物件導向</a></li>
</ul>
</article>

      
<div class="book-footer justify-between">
  
  <div>
    
    <a href="/commit/fda25aafea9413c8ec77f5df29d5f6bb5f7dc3a6" title='Last modified Sep 21, 2019 by Jiuxiao' target="_blank" rel="noopener">
      <img src="/buildWebWithGolangTw/svg/calendar.svg" alt="Changed" /> Sep 21, 2019
    </a>
  </div>
  
  
</div>


      
    </div>

    
  

  <aside class="book-toc level-3 fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#2-4-struct-型別">2.4 struct 型別</a>
<ul>
<li><a href="#struct">struct</a>
<ul>
<li><a href="#struct-的匿名欄位">struct 的匿名欄位</a></li>
</ul></li>
<li><a href="#links">links</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-148025936-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>

</html>
